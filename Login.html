<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Noobathon Login</title>

<link rel="stylesheet" href="styles_Login.css">
</head>

<body>

<!-- Background Music -->
<audio id="bgm" loop preload="auto">
    <source src="bgm.mp3" type="audio/mpeg">
</audio>

<div class="login-box">
    <h2>NOOBATHON</h2>
    <div class="input-box">
        <input type="text" placeholder="Username" />
    </div>
    <div class="input-box">
        <input type="password" placeholder="Password" />
    </div>
    <button id="enterBtn">ENTER THE DARKNESS</button>
    <div class="footer-text">Survive. Adapt. Dominate.</div>
</div>

<script>
  // ===== REGISTER =====
  const registerForm = document.getElementById('register-form-element');
  registerForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const username = document.getElementById('register-username').value;
    const email = document.getElementById('register-email').value;
    const password = document.getElementById('register-password').value;

    const res = await fetch('/register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username, email, password })
    });
    const data = await res.json();
    if (res.ok) {
      alert(`Registered: ${data.user.username}`);
      // Optionally switch to login form
    } else {
      alert(data.error);
    }
  });

  // ===== LOGIN =====
  const loginForm = document.getElementById('login-form-element');
  loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('login-email').value;
    const password = document.getElementById('login-password').value;

    const res = await fetch('/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, password })
    });
    const data = await res.json();
    if (res.ok) {
      alert(`Logged in as: ${data.user.username}`);
      // Redirect to dashboard or do something else
    } else {
      alert(data.error);
    }
  });
</script>


</body>
</html>
